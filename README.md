# Frigate

## Первоначальная настройка контейнера

### Запуск контейнера
docker compose build <br/>
docker compose up -d

### Просмотр логов
docker compose logs -f <br/>
Ctrl + C - закрыть

## Настройка Frigate

### Сервис доступен по адресу
http://localhost:5000

### Настройка камеры
Config (меню слева) -> cameras -> <название камеры> -> ffmpeg -> inputs -> - path: <адрес камеры>

### Настройка зон
Cameras (меню слева) -> Желаемая камера -> Debug (справа) -> Show options (под изображением с камеры) -> Mask & Zone creator

### Просмотр событий
Events (меню слева), возможна сортировка по Дате, Камере, Виду объекта, Зонам, Саблейблам, Избранным событиям (со звездочками)

## Настройка сервиса по обработке событий и определению скорости

### Настройка слушателя сообщений
&nbsp <br/>
.env файл по пути mqtt/ <br/>
#### Если нежелательный объект попал в заданную зону на определенную камеру
CAMERAS = test <br/>
ZONES = zone_1 <br/>
LABELS = no_vest no_hemlet <br/>
#### Если длительность события превышает заданное значение
DURATION = 30 <br/>
#### Максимальная разрешенная скорость
MAX_SPEED = 30 <br/><br/>

transform_points.json по пути mqtt/speed_estimation/
#### Координаты для афинных преобразования для определения скорости
"имя_камеры": {<br/>
    ^ "TARGET_WIDTH" : ширина,<br/>
    ^ "TARGET_HEIGHT" : высота,<br/>
    ^ "SOURCE" : [<br/>
    ^ ^    [1252, 787],<br/>
    ^ ^    [2298, 803],<br/>
    ^ ^    [5039, 2159],<br/>
    ^ ^    [-550, 2159]<br/>
    ^ ]<br/>
}